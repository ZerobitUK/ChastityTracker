<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chastity Timer</title>
    <style>
        :root {
            --primary-color: #3f51b5;
            --secondary-color: #f0f4c3;
            --text-color: #333;
            --background-color: #f5f5f5;
            --banner-color: #c5cae9;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 600px;
            text-align: center;
            padding: 2rem;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .quote-banner {
            width: 100%;
            padding: 1rem;
            background-color: var(--banner-color);
            color: var(--primary-color);
            font-size: 1.1rem;
            font-style: italic;
            text-align: center;
            border-bottom: 2px solid var(--primary-color);
            margin-bottom: 2rem;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        #timer {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .date-info {
            font-size: 1rem;
            color: #666;
            margin-bottom: 2rem;
        }

        .actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
        }

        button {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }

        button.start {
            background-color: #4caf50;
            color: white;
        }

        button.reset {
            background-color: #f44336;
            color: white;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .pin-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        #pinInput {
            padding: 0.5rem;
            font-size: 1rem;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 100%;
            max-width: 200px;
            text-align: center;
        }

    </style>
</head>
<body>
    <div class="quote-banner" id="quote-banner"></div>

    <div class="container" id="main-content">
        <div id="pin-screen">
            <h2>Enter PIN to access</h2>
            <input type="password" id="pinInput" placeholder="Enter PIN">
            <button onclick="checkPin()">Unlock</button>
        </div>

        <div id="timer-screen" style="display:none;">
            <h1>Time in Chastity</h1>
            <div id="timer">00:00:00</div>
            <div class="date-info">
                <p>Start Date: <span id="startDate">N/A</span></p>
                <p>End Date: <span id="endDate">N/A</span></p>
            </div>
            <div class="actions">
                <button class="start" onclick="startTimer()">Start Timer</button>
                <button class="reset" onclick="resetTimer()">Reset Timer</button>
            </div>
        </div>
    </div>

    <script>
        const PIN = "1234"; // CHANGE THIS PIN!

        const quotes = [
            "Discipline is the bridge between goals and accomplishment.",
            "The greatest victory is that which requires no battle.",
            "Freedom is not the absence of commitments, but the ability to choose your commitments.",
            "Strength does not come from winning. Your struggles develop your strengths.",
            "Control yourself, and you can conquer the world.",
            "Patience is bitter, but its fruit is sweet.",
            "True power is knowing when not to use it."
        ];

        const timerEl = document.getElementById('timer');
        const startDateEl = document.getElementById('startDate');
        const endDateEl = document.getElementById('endDate');
        const mainContent = document.getElementById('main-content');
        const pinScreen = document.getElementById('pin-screen');
        const timerScreen = document.getElementById('timer-screen');
        const quoteBanner = document.getElementById('quote-banner');

        let interval = null;

        // Display a random motivational quote
        function displayQuote() {
            const randomIndex = Math.floor(Math.random() * quotes.length);
            quoteBanner.textContent = quotes[randomIndex];
        }

        // Check the PIN entered by the user
        function checkPin() {
            const pinInput = document.getElementById('pinInput').value;
            if (pinInput === PIN) {
                pinScreen.style.display = 'none';
                timerScreen.style.display = 'block';
                loadState();
            } else {
                alert("Incorrect PIN. Try again.");
            }
        }

        // Load the timer state from local storage
        function loadState() {
            const startTime = localStorage.getItem('chastity_start_time');
            const endTime = localStorage.getItem('chastity_end_time');

            if (startTime) {
                startDateEl.textContent = new Date(parseInt(startTime)).toLocaleString();
                if (endTime) {
                    endDateEl.textContent = new Date(parseInt(endTime)).toLocaleString();
                    const durationMs = parseInt(endTime) - parseInt(startTime);
                    updateTimerDisplay(durationMs);
                } else {
                    startUpdateInterval();
                }
            }
        }

        // Update the timer display every second
        function startUpdateInterval() {
            interval = setInterval(() => {
                const startTime = localStorage.getItem('chastity_start_time');
                if (startTime) {
                    const now = new Date().getTime();
                    const durationMs = now - parseInt(startTime);
                    updateTimerDisplay(durationMs);
                }
            }, 1000);
        }

        // Convert milliseconds to a readable time format
        function updateTimerDisplay(durationMs) {
            const days = Math.floor(durationMs / (1000 * 60 * 60 * 24));
            const hours = Math.floor((durationMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((durationMs % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((durationMs % (1000 * 60)) / 1000);

            timerEl.textContent = 
                `${String(days).padStart(2, '0')}d : ${String(hours).padStart(2, '0')}h : ${String(minutes).padStart(2, '0')}m : ${String(seconds).padStart(2, '0')}s`;
        }

        // Start the timer
        function startTimer() {
            const now = new Date().getTime();
            localStorage.setItem('chastity_start_time', now);
            localStorage.removeItem('chastity_end_time');
            startDateEl.textContent = new Date(now).toLocaleString();
            endDateEl.textContent = 'N/A';

            clearInterval(interval);
            startUpdateInterval();
        }

        // Reset the timer
        function resetTimer() {
            if (interval) {
                clearInterval(interval);
            }
            const now = new Date().getTime();
            localStorage.setItem('chastity_end_time', now);
            endDateEl.textContent = new Date(now).toLocaleString();
            timerEl.textContent = '00:00:00';
            
            // To display the final duration
            const startTime = localStorage.getItem('chastity_start_time');
            if (startTime) {
                const durationMs = now - parseInt(startTime);
                updateTimerDisplay(durationMs);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            displayQuote();
        });
    </script>
</body>
</html>
